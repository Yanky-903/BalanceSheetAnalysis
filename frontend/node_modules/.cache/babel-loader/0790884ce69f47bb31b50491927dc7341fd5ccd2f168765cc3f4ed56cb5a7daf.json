{"ast":null,"code":"// frontend/src/api.js\nimport axios from \"axios\";\nconst BACKEND = process.env.REACT_APP_BACKEND_URL || \"https://balancesheetanalysis-3.onrender.com\";\n\n// single axios instance\nconst api = axios.create({\n  baseURL: BACKEND\n  // you can set other defaults here (timeout, etc.)\n});\n\n// cal this to (re)load token from localStorage into axios headers\nexport function setAuthTokenFromStorage() {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  } else {\n    delete api.defaults.headers.common[\"Authorization\"];\n  }\n}\n// initialize once on import\nsetAuthTokenFromStorage();\n\n// login returns axios Promise (caller can access res.data)\nexport const login = (email, password) => api.post(\"/auth/login\", {\n  email,\n  password\n});\n\n// listCompanies uses the shared axios instance (no need to pass token manually)\nexport const listCompanies = () => api.get(\"/companies\");\n\n// uploadPdf uses FormData. Do NOT manually set Content-Type (axios sets boundary automatically)\nexport const uploadPdf = (company_name, file, pdf_url) => {\n  const fd = new FormData();\n  fd.append(\"company_name\", company_name);\n  if (file) fd.append(\"file\", file);\n  if (pdf_url) fd.append(\"pdf_url\", pdf_url);\n  return api.post(\"/upload_pdf\", fd);\n};\n\n// getCompanySheets\nexport const getCompanySheets = company_id => api.get(`/companies/${company_id}/balance_sheets`);\nexport default api;","map":{"version":3,"names":["axios","BACKEND","process","env","REACT_APP_BACKEND_URL","api","create","baseURL","setAuthTokenFromStorage","token","localStorage","getItem","defaults","headers","common","login","email","password","post","listCompanies","get","uploadPdf","company_name","file","pdf_url","fd","FormData","append","getCompanySheets","company_id"],"sources":["/Users/sakina/balance-assistant/frontend/src/api.js"],"sourcesContent":["// frontend/src/api.js\nimport axios from \"axios\";\n\nconst BACKEND = process.env.REACT_APP_BACKEND_URL || \"https://balancesheetanalysis-3.onrender.com\";\n\n// single axios instance\nconst api = axios.create({\n  baseURL: BACKEND,\n  // you can set other defaults here (timeout, etc.)\n});\n\n// cal this to (re)load token from localStorage into axios headers\nexport function setAuthTokenFromStorage() {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  } else {\n    delete api.defaults.headers.common[\"Authorization\"];\n  }\n}\n// initialize once on import\nsetAuthTokenFromStorage();\n\n// login returns axios Promise (caller can access res.data)\nexport const login = (email, password) => api.post(\"/auth/login\", { email, password });\n\n// listCompanies uses the shared axios instance (no need to pass token manually)\nexport const listCompanies = () => api.get(\"/companies\");\n\n// uploadPdf uses FormData. Do NOT manually set Content-Type (axios sets boundary automatically)\nexport const uploadPdf = (company_name, file, pdf_url) => {\n  const fd = new FormData();\n  fd.append(\"company_name\", company_name);\n  if (file) fd.append(\"file\", file);\n  if (pdf_url) fd.append(\"pdf_url\", pdf_url);\n  return api.post(\"/upload_pdf\", fd);\n};\n\n// getCompanySheets\nexport const getCompanySheets = (company_id) => api.get(`/companies/${company_id}/balance_sheets`);\n\nexport default api;\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,IAAI,6CAA6C;;AAElG;AACA,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;EACvBC,OAAO,EAAEN;EACT;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,SAASO,uBAAuBA,CAAA,EAAG;EACxC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTJ,GAAG,CAACO,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUL,KAAK,EAAE;EAClE,CAAC,MAAM;IACL,OAAOJ,GAAG,CAACO,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;EACrD;AACF;AACA;AACAN,uBAAuB,CAAC,CAAC;;AAEzB;AACA,OAAO,MAAMO,KAAK,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAKZ,GAAG,CAACa,IAAI,CAAC,aAAa,EAAE;EAAEF,KAAK;EAAEC;AAAS,CAAC,CAAC;;AAEtF;AACA,OAAO,MAAME,aAAa,GAAGA,CAAA,KAAMd,GAAG,CAACe,GAAG,CAAC,YAAY,CAAC;;AAExD;AACA,OAAO,MAAMC,SAAS,GAAGA,CAACC,YAAY,EAAEC,IAAI,EAAEC,OAAO,KAAK;EACxD,MAAMC,EAAE,GAAG,IAAIC,QAAQ,CAAC,CAAC;EACzBD,EAAE,CAACE,MAAM,CAAC,cAAc,EAAEL,YAAY,CAAC;EACvC,IAAIC,IAAI,EAAEE,EAAE,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;EACjC,IAAIC,OAAO,EAAEC,EAAE,CAACE,MAAM,CAAC,SAAS,EAAEH,OAAO,CAAC;EAC1C,OAAOnB,GAAG,CAACa,IAAI,CAAC,aAAa,EAAEO,EAAE,CAAC;AACpC,CAAC;;AAED;AACA,OAAO,MAAMG,gBAAgB,GAAIC,UAAU,IAAKxB,GAAG,CAACe,GAAG,CAAC,cAAcS,UAAU,iBAAiB,CAAC;AAElG,eAAexB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}